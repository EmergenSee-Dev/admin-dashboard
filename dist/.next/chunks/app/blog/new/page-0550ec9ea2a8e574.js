(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6954],{874:(e,t,a)=>{Promise.resolve().then(a.bind(a,23))},23:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(5155),l=a(2115),r=a(4594);a(8469);var n=a(6046),i=a(2651),c=a(4919);let o=()=>{let[e,t]=(0,l.useState)("# Hello Editor"),[a,c]=(0,l.useState)(!1),[o,d]=(0,l.useState)(""),[m,u]=(0,l.useState)(""),[h,x]=(0,l.useState)(""),[g,p]=(0,l.useState)(null),f=(0,n.useRouter)(),j=(0,l.useRef)(null),b=(0,n.useSearchParams)().get("id"),[v,N]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{let e=localStorage.getItem("blogDraft");if(e){let{title:a,text:s,body:l,image:r}=JSON.parse(e);d(a||""),t(s||""),u(l||""),x(r||"")}N(!0),b&&await w()})()},[b]),(0,l.useEffect)(()=>{v&&localStorage.setItem("blogDraft",JSON.stringify({title:o,text:e,body:m,image:h}))},[o,e,m,h,v]);let w=async()=>{try{let e=await i.A.get("https://backend-api-mxr6.onrender.com/api/blogs/".concat(b));if(e.data&&e.data.data){let a=e.data.data;d(a.title),t(a.content),u(a.description),x(a.image)}else console.error("No such document!")}catch(e){console.error("Error fetching blog:",e)}},y=e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];p(a);let s=new FileReader;s.onloadend=()=>{var e;x((null===(e=s.result)||void 0===e?void 0:e.toString())||"")},a&&s.readAsDataURL(a)},k=async()=>{if(!o.trim()){alert("Title cannot be empty.");return}if(!e.trim()){alert("Text cannot be empty.");return}if(m.length<1||m.length>100){alert("Body must be between 1 and 100 characters.");return}b?await C():g?await S():alert("Please upload an image.")},S=async()=>{c(!0);try{let t=new FormData;t.append("title",o),t.append("description",m),t.append("content",e),t.append("image",g),await i.A.post("https://backend-api-mxr6.onrender.com/api/blogs/new",t,{headers:{"Content-Type":"multipart/form-data"}}),c(!1),E(),f.push("/blog")}catch(e){console.error("Error creating blog:",e),c(!1)}},C=async()=>{c(!0);try{await i.A.put("https://backend-api-mxr6.onrender.com/api/blogs/edit/".concat(b),{title:o,description:m,content:e}),c(!1),E(),f.push("/blog")}catch(e){console.error("Error updating blog:",e),c(!1)}},E=()=>{localStorage.removeItem("blogDraft")};return(0,s.jsxs)("main",{className:"mx-4",children:[(0,s.jsxs)("div",{className:"flex my-6 justify-between",children:[(0,s.jsx)("h1",{className:"text-4xl",children:b?"Edit Blog":"New Blog"}),(0,s.jsx)("button",{onClick:k,className:"bg-[#FFCC00] text-white p-3 w-32 my-auto",children:a?"Loading...":b?"Update":"Save"})]}),(0,s.jsxs)("button",{onClick:()=>j.current.click(),className:"my-3 flex w-32 justify-evenly bg-white border rounded-full p-3",children:[(0,s.jsx)("div",{className:"my-auto",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-image",viewBox:"0 0 16 16",children:[(0,s.jsx)("path",{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"}),(0,s.jsx)("path",{d:"M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1z"})]})}),(0,s.jsx)("p",{className:"my-auto",children:"Photo"})]}),(0,s.jsx)("input",{type:"file",className:"hidden",onChange:e=>y(e),ref:j}),h&&(0,s.jsx)("img",{src:h,alt:"Selected",className:"w-full h-80 object-cover"}),(0,s.jsx)("input",{value:o,onChange:e=>d(e.target.value),type:"text",placeholder:"Title",className:"w-full p-3 my-3 text-4xl"}),(0,s.jsx)("div",{className:"my-3",children:(0,s.jsx)(r.E,{modelValue:e,onChange:t,language:"en-US",toolbars:["bold","underline","italic","strikeThrough","title","sub","sup","quote","unorderedList","orderedList","link","code","image"]})}),(0,s.jsx)("div",{className:"my-3",children:(0,s.jsx)("textarea",{value:m,onChange:e=>u(e.target.value),placeholder:"Write a brief description",className:"h-20 p-3 w-full border rounded-md"})})]})},d=()=>(0,s.jsx)(c.default,{children:(0,s.jsx)(l.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:(0,s.jsx)(o,{})})})},4919:(e,t,a)=>{"use strict";a.d(t,{default:()=>u});var s=a(5155),l=a(2115),r=a(8173),n=a.n(r),i=a(6046);let c=()=>{let e=e=>{if((0,i.usePathname)()===e)return!0};return(0,s.jsxs)("div",{className:"h-screen",children:[(0,s.jsx)(n(),{href:"/dashboard",children:(0,s.jsx)("div",{className:"my-6 ".concat(e("/dashboard")&&"bg-[#FFCC00] p-3 rounded-xl"),children:(0,s.jsx)("p",{className:"uppercase text-[#3D5059] font-bold",children:"Dashboard"})})}),[{title:"users",link:"/users"},{title:"emergensees",link:"/emergensees"},{title:"logout",link:"/"}].map(t=>(0,s.jsx)(n(),{href:t.link,children:(0,s.jsxs)("div",{className:"flex my-5 px-3 ".concat(e(t.link)?"bg-[#FFCC00] p-3 rounded-xl":""),children:[(0,s.jsx)("img",{className:"mr-3 w-4 h-4 my-auto",src:"/images/icons/".concat(t.title,".svg"),alt:""}),(0,s.jsx)("p",{className:"capitalize font-medium",children:t.title})]})},t.title))]})},o=e=>{let{open:t,handleClose:a}=e;return t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{onClick:()=>a(),className:"bg-[#2B2B2B57] cursor-pointer fixed top-16 backdrop-blur-sm w-screen h-screen"}),(0,s.jsxs)("div",{className:"absolute lg:w-[30%] w-[90%] top-20 right-4 bg-white p-4 rounded-xl",children:[(0,s.jsxs)("div",{className:"flex  justify-between mb-1",children:[(0,s.jsx)("p",{className:"text-[#9FA4A7] text-sm",children:"Notifications"}),(0,s.jsx)("p",{className:"text-[#3688FF] text-sm",children:"See all"})]}),[1,2,3].map(e=>(0,s.jsx)("div",{className:"py-3 border-b border-[#ABB3B7]",children:(0,s.jsxs)("div",{className:"bg-[#D7D7D833] rounded-md p-2 flex",children:[(0,s.jsx)("img",{className:"my-auto",src:"/images/scheduler.png",alt:""}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-[#0E4BF1] font-medium text-sm",children:"New Emergency"}),(0,s.jsx)("p",{className:"text-xs",children:"Burn incident at Lekki"}),(0,s.jsx)("p",{className:"text-xs",children:"Tuesday, June 14, 2024 18:16:1"})]})]})}))]})]})};var d=a(4928),m=a(8400);let u=e=>{let{children:t}=e,[a,r]=(0,l.useState)(!1),n=(0,i.useRouter)(),[u,h]=(0,l.useState)(!1),[x,g]=(0,d.useAtom)(m.S);return(0,l.useEffect)(()=>{let e=setTimeout(()=>{x||n.replace("/")},1e3);return()=>clearTimeout(e)},[x,n]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("header",{className:"p-3 flex items-center fixed top-0 w-full bg-white shadow-md z-50",children:[(0,s.jsx)("img",{src:"/images/emergensee4.png",className:"h-10 object-cover",alt:"Logo"}),(0,s.jsxs)("div",{className:"ml-auto flex items-center gap-4",children:[(0,s.jsx)("img",{className:"w-10 h-10 cursor-pointer md:hidden",onClick:()=>h(!u),src:"/images/menu.svg",alt:"Menu"}),(0,s.jsx)("img",{className:"w-10 h-10 cursor-pointer",onClick:()=>r(!a),src:"/images/notification.png",alt:"Notifications"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row p-3 mt-16",children:[(0,s.jsx)("div",{className:"fixed p-4 left-0 lg:w-[23%] bg-white shadow-lg transform transition-transform duration-300 ease-in-out\n            ".concat(u?"translate-x-0":"-translate-x-full"," md:translate-x-0 md:static"),children:(0,s.jsx)(c,{})}),(0,s.jsx)("div",{className:"w-full lg:px-3",children:t})]}),(0,s.jsx)(o,{open:a,handleClose:()=>r(!1)})]})}},8400:(e,t,a)=>{"use strict";a.d(t,{S:()=>r});var s=a(1094);let l=localStorage,r=(0,s.tG)("token",null,{getItem:e=>{var t;return null!==(t=null==l?void 0:l.getItem(e))&&void 0!==t?t:null},setItem:(e,t)=>null==l?void 0:l.setItem(e,t),removeItem:e=>null==l?void 0:l.removeItem(e)})}},e=>{var t=t=>e(e.s=t);e.O(0,[7444,6079,4928,6023,8173,2651,4642,8441,1517,7358],()=>t(874)),_N_E=e.O()}]);